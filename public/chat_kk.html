<!DOCTYPE html>
<html lang="kk">
  <head>
    <title>AI –ö”©–º–µ–∫—à—ñ - Ai-Toolkit</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=DM+Sans:300,400,700|Indie+Flower" rel="stylesheet">
    

    <link rel="stylesheet" href="fonts/icomoon/style.css">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="css/jquery.fancybox.min.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="fonts/flaticon/font/flaticon.css">
    <link rel="stylesheet" href="css/aos.css">
    <link rel="stylesheet" href="css/responsive.css">

    <!-- MAIN CSS -->
    <link rel="stylesheet" href="css/style.css">

    <style>
      /* Chat specific styles */
      .chat-container {
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 5px 15px -5px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        height: 70vh;
        display: flex;
        flex-direction: column;
      }
      
      .chat-header {
        background: #fd4d40;
        color: white;
        padding: 1rem;
        text-align: center;
      }
      
      .chat-messages {
        flex: 1;
        padding: 1.5rem;
        overflow-y: auto;
        background-color: #f8f9fa;
      }
      
      .message {
        margin-bottom: 1rem;
        display: flex;
      }
      
      .user-message {
        justify-content: flex-end;
      }
      
      .bot-message {
        justify-content: flex-start;
      }
      
      .message-bubble {
        max-width: 70%;
        padding: 0.75rem 1rem;
        border-radius: 18px;
        position: relative;
      }
      
      .user-message .message-bubble {
        background-color: #fd4d40;
        color: white;
        border-bottom-right-radius: 4px;
      }
      
      .bot-message .message-bubble {
        background-color: white;
        color: #333;
        border-bottom-left-radius: 4px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      }
      
      .message-time {
        font-size: 0.7rem;
        opacity: 0.7;
        margin-top: 0.25rem;
      }
      
      .chat-input-container {
        display: flex;
        padding: 1rem;
        background-color: white;
        border-top: 1px solid #eee;
      }
      
      .chat-input {
        flex: 1;
        padding: 0.75rem 1rem;
        border: 1px solid #ddd;
        border-radius: 25px;
        outline: none;
        font-size: 1rem;
      }
      
      .chat-input:focus {
        border-color: #fd4d40;
      }
      
      .send-button {
        background-color: #fd4d40;
        color: white;
        border: none;
        border-radius: 50%;
        width: 45px;
        height: 45px;
        margin-left: 0.5rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background-color 0.3s;
      }
      
      .send-button:hover {
        background-color: #e04438;
      }
      
      .typing-indicator {
        display: none;
        padding: 0.75rem 1rem;
        background-color: white;
        border-radius: 18px;
        border-bottom-left-radius: 4px;
        max-width: 70%;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      }
      
      .typing-dots {
        display: flex;
      }
      
      .typing-dots span {
        height: 8px;
        width: 8px;
        background-color: #bbb;
        border-radius: 50%;
        display: inline-block;
        margin: 0 2px;
        animation: typing 1.4s infinite ease-in-out;
      }
      
      .typing-dots span:nth-child(1) {
        animation-delay: 0s;
      }
      
      .typing-dots span:nth-child(2) {
        animation-delay: 0.2s;
      }
      
      .typing-dots span:nth-child(3) {
        animation-delay: 0.4s;
      }
      
      @keyframes typing {
        0%, 60%, 100% {
          transform: translateY(0);
        }
        30% {
          transform: translateY(-5px);
        }
      }
      
      .auth-indicator {
        position: fixed;
        top: 100px;
        right: 20px;
        background: #28a745;
        color: white;
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 14px;
        z-index: 1000;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      .login-prompt {
        text-align: center;
        padding: 20px;
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        border-radius: 10px;
        margin-bottom: 20px;
      }
    </style>
  </head>

  <body data-spy="scroll" data-target=".site-navbar-target" data-offset="300" style="background-color: #B2B2B2;">

    
    <div class="site-wrap" id="home-section">

      <div class="site-mobile-menu site-navbar-target">
        <div class="site-mobile-menu-header">
          <div class="site-mobile-menu-close mt-3">
            <span class="icon-close2 js-menu-toggle"></span>
          </div>
        </div>
        <div class="site-mobile-menu-body"></div>
      </div>

      <header class="site-navbar site-navbar-target" role="banner">

        <div class="container mb-3">
          <div class="d-flex align-items-center">
            <div class="site-logo mr-auto">
              <a href="index_kk.html">Ai-Toolkit<span class="text-primary">.</span></a>
            </div>
            <div class="site-quick-contact d-none d-lg-flex ml-auto ">
              <div class="d-flex site-info align-items-center mr-5">
                <span class="block-icon mr-3"><span class="icon-map-marker text-yellow"></span></span>
                <span>–®–µ—Ä—Ö–∞–Ω –ú“±—Ä—Ç–∞–∑–∞ –∞—Ç—ã–Ω–¥–∞“ì—ã –º–µ–∫—Ç–µ–ø <br>–¢–∞—Ä–∞–∑</span>
              </div>
              <div class="d-flex site-info align-items-center">
                <span class="block-icon mr-3"><span class="icon-clock-o"></span></span>
                <span>”ò–∑—ñ—Ä–ª–µ–Ω—É–¥–µ</span>
              </div>
              
            </div>
          </div>
        </div>

        <div class="container">
          <div class="menu-wrap d-flex align-items-center">
            <span class="d-inline-block d-lg-none"><a href="#" class="text-black site-menu-toggle js-menu-toggle py-5"><span class="icon-menu h3 text-black"></span></a></span>

              <nav class="site-navigation text-left mr-auto d-none d-lg-block" role="navigation">
                <ul class="site-menu main-menu js-clone-nav mr-auto ">
                  <li><a href="index_kk.html" class="nav-link">–ë–∞—Å—Ç—ã</a></li>
                  <li class="active"><a href="chat_kk.html" class="nav-link">AI –ö”©–º–µ–∫—à—ñ</a></li>
                  <li><a href="test_kk.html" class="nav-link">–¢–µ—Å—Ç –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã</a></li>
                  <li><a href="img_kk.html" class="nav-link">–ö–æ–Ω—Ç–µ–Ω—Ç –Ü–∑–¥–µ—É</a></li>
                  <li><a href="contact_kk.html" class="nav-link">–ë–∞–π–ª–∞–Ω—ã—Å</a></li>
                  <li><a href="edu_kk.html" class="nav-link">–ë—ñ–ª—ñ–º</a></li>
                  <li><a href="acc_kk.html" class="nav-link">–ê–∫–∫–∞—É–Ω—Ç</a></li>
                </ul>
              </nav>
          </div>
        </div>
      </header>

      <div style="background-color: #B2B2B2; margin-top: 200px;" id="assistant-section">
        <div class="container">
          <div class="row mb-5">
            <div class="col-12 text-center">
              <span class="text-cursive h5 text-red d-block">AI –û“õ—É –ö”©–º–µ–∫—à—ñ—Å—ñ</span>
              <h2 class="text-black">–ö–æ–º–ø—å—é—Ç–µ—Ä–ª—ñ–∫ “ì—ã–ª—ã–º–¥–∞—Ä —Ç—É—Ä–∞–ª—ã –º–∞“ì–∞–Ω –∫–µ–∑ –∫–µ–ª–≥–µ–Ω –Ω”ô—Ä—Å–µ–Ω—ñ —Å“±—Ä–∞“£—ã–∑</h2>
              <p class="lead">–ú–µ–Ω —Å—ñ–∑–≥–µ –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É–¥—ã, –∞–ª–≥–æ—Ä–∏—Ç–º–¥–µ—Ä–¥—ñ –∂”ô–Ω–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–ª—ñ–∫ “ì—ã–ª—ã–º–¥–∞—Ä“ì–∞ “õ–∞—Ç—ã—Å—Ç—ã –±–∞—Ä–ª—ã“õ –Ω”ô—Ä—Å–µ–Ω—ñ “Ø–π—Ä–µ–Ω—É–≥–µ –∫”©–º–µ–∫—Ç–µ—Å—É “Ø—à—ñ–Ω –æ—Å—ã–Ω–¥–∞–º—ã–Ω!</p>
            </div>
          </div>
          
          <!-- Auth Indicator -->
          <div id="authIndicatorContainer"></div>
          
          <div class="row justify-content-center">
            <div class="col-lg-10">
              <div class="chat-container">
                <div class="chat-header">
                  <h3 class="text-white m-0">AI –û“õ—É –ö”©–º–µ–∫—à—ñ—Å—ñ</h3>
                </div>
                
                <div class="chat-messages" id="chatMessages">
                  <div class="message bot-message">
                    <div class="message-bubble">
                      <p>–°”ô–ª–µ–º! –ú–µ–Ω —Å—ñ–∑–¥—ñ“£ AI –æ“õ—É –∫”©–º–µ–∫—à—ñ—Å—ñ–º—ñ–Ω. –ú–µ–Ω —Å—ñ–∑–≥–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–ª—ñ–∫ “ì—ã–ª—ã–º–¥–∞—Ä, –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É, –∞–ª–≥–æ—Ä–∏—Ç–º–¥–µ—Ä –∂”ô–Ω–µ –±–∞—Å“õ–∞ –º–µ–∫—Ç–µ–ø –ø”ô–Ω–¥–µ—Ä—ñ –±–æ–π—ã–Ω—à–∞ –∫”©–º–µ–∫—Ç–µ—Å–µ –∞–ª–∞–º—ã–Ω. –ë“Ø–≥—ñ–Ω –Ω–µ “Ø–π—Ä–µ–Ω–≥—ñ“£—ñ–∑ –∫–µ–ª–µ–¥—ñ?</p>
                      <div class="message-time">“ö–∞–∑—ñ—Ä</div>
                    </div>
                  </div>
                </div>
                
                <div class="typing-indicator" id="typingIndicator">
                  <div class="typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                  </div>
                </div>
                
                <div class="chat-input-container">
                  <input type="text" class="chat-input" id="chatInput" placeholder="–ö–æ–º–ø—å—é—Ç–µ—Ä–ª—ñ–∫ “ì—ã–ª—ã–º–¥–∞—Ä —Ç—É—Ä–∞–ª—ã —Å“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –æ—Å—ã–Ω–¥–∞ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑...">
                  <button class="send-button" id="sendButton">
                    <span class="icon-send"></span>
                  </button>
                </div>
              </div>
            </div>
          </div>
          
          <div class="row mt-5">
            <div class="col-md-4 text-center">
              <div class="block-2 red">
                <span class="wrap-icon">
                  <span class="icon-help"></span>
                </span>
                <h2>–õ–µ—É–º–µ—Ç—Ç—ñ–∫ –∫”©–º–µ–∫</h2>
                <p>–ë–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É –±–æ–π—ã–Ω—à–∞ —Å“±—Ä–∞“õ—Ç–∞—Ä—ã“£—ã–∑“ì–∞ –±—ñ—Ä–¥–µ–Ω –∂–∞—É–∞–ø –∞–ª—ã“£—ã–∑</p>
              </div>
            </div>
            <div class="col-md-4 text-center">
              <div class="block-2 yellow">
                <span class="wrap-icon">
                  <span class="icon-code"></span>
                </span>
                <h2>–ö–æ–¥ –º—ã—Å–∞–ª–¥–∞—Ä—ã</h2>
                <p>–ü—Ä–∞–∫—Ç–∏–∫–∞–ª—ã“õ –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É –º—ã—Å–∞–ª–¥–∞—Ä—ã–º–µ–Ω “Ø–π—Ä–µ–Ω—ñ“£—ñ–∑</p>
              </div>
            </div>
            <div class="col-md-4 text-center">
              <div class="block-2 teal">
                <span class="wrap-icon">
                  <span class="icon-school"></span>
                </span>
                <h2>–û“õ—É –±–∞“ì–¥–∞—Ä–ª–∞–º–∞—Å—ã–Ω–∞ “õ–æ–ª–¥–∞—É</h2>
                <p>–°—ñ–∑–¥—ñ“£ –º–µ–∫—Ç–µ–ø –∫–æ–º–ø—å—é—Ç–µ—Ä–ª—ñ–∫ “ì—ã–ª—ã–º–¥–∞—Ä –±–∞“ì–¥–∞—Ä–ª–∞–º–∞—Å—ã–Ω–∞ —Å”ô–π–∫–µ—Å</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="site-section bg-white" id="features">
        <div class="container">
          <div class="row mb-5">
            <div class="col-12 text-center">
              <span class="text-cursive h5 text-red d-block">–ë“±–ª “õ–∞–ª–∞–π –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ</span>
              <h2 class="text-black">AI –∞—Ä“õ—ã–ª—ã –∫–æ–º–ø—å—é—Ç–µ—Ä–ª—ñ–∫ “ì—ã–ª—ã–º–¥–∞—Ä–¥—ã “Ø–π—Ä–µ–Ω—ñ“£—ñ–∑</h2>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-4 mb-4 mb-lg-0">
              <div class="package text-center bg-light">
                <span class="img-wrap"><img src="images/flaticon/svg/001-jigsaw.svg" alt="Image" class="img-fluid"></span>
                <h3 class="text-teal">–ë–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É —Ç“±–∂—ã—Ä—ã–º–¥–∞–º–∞–ª–∞—Ä—ã</h3>
                <p>–ê–π–Ω—ã–º–∞–ª—ã–ª–∞—Ä, —Ü–∏–∫–ª–¥–∞—Ä, —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä –∂”ô–Ω–µ –Ω—ã—Å–∞–Ω“ì–∞ –±–∞“ì—ã—Ç—Ç–∞–ª“ì–∞–Ω –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É–¥—ã –∞–Ω—ã“õ —Ç“Ø—Å—ñ–Ω—ñ–∫—Ç–µ–º–µ–ª–µ—Ä–º–µ–Ω —Ç“Ø—Å—ñ–Ω—ñ“£—ñ–∑</p>
              </div>
            </div>
            <div class="col-lg-4 mb-4 mb-lg-0">
              <div class="package text-center bg-light">
                <span class="img-wrap"><img src="images/flaticon/svg/002-target.svg" alt="Image" class="img-fluid"></span>
                <h3 class="text-success">–ê–ª–≥–æ—Ä–∏—Ç–º–¥–µ—Ä–≥–µ –∫”©–º–µ–∫</h3>
                <p>–ê–ª–≥–æ—Ä–∏—Ç–º–¥–µ—Ä–¥—ñ“£ “õ–∞–ª–∞–π –∂“±–º—ã—Å —ñ—Å—Ç–µ–π—Ç—ñ–Ω—ñ–Ω –∂”ô–Ω–µ –º”ô—Å–µ–ª–µ–ª–µ—Ä–¥—ñ “õ–∞–¥–∞–º–¥–∞—Ä –±–æ–π—ã–Ω—à–∞ “õ–∞–ª–∞–π —à–µ—à—É–≥–µ –±–æ–ª–∞—Ç—ã–Ω—ã–Ω “Ø–π—Ä–µ–Ω—ñ“£—ñ–∑</p>
              </div>
            </div>
            <div class="col-lg-4 mb-4 mb-lg-0">
              <div class="package text-center bg-light">
                <span class="img-wrap"><img src="images/flaticon/svg/003-mission.svg" alt="Image" class="img-fluid"></span>
                <h3 class="text-danger">–í–µ–±-”ô–∑—ñ—Ä–ª–µ—É</h3>
                <p>HTML, CSS, JavaScript –∂”ô–Ω–µ –∞–ª“ì–∞—à“õ—ã –≤–µ–±-—Å–∞–π—Ç—Ç–∞—Ä—ã“£—ã–∑–¥—ã “õ“±—Ä—É –±–æ–π—ã–Ω—à–∞ –∫”©–º–µ–∫ –∞–ª—ã“£—ã–∑</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="site-section py-5 bg-warning">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-md-12 d-flex">
            <h2 class="text-white m-0">–ö–æ–º–ø—å—é—Ç–µ—Ä–ª—ñ–∫ “ì—ã–ª—ã–º–¥–∞—Ä –±—ñ–ª—ñ–º—ñ–Ω–µ “õ—ã–∑—ã“õ—Ç—ã–ª—ã“õ ”ô–∫–µ–ª—ñ“£—ñ–∑</h2>
            <a href="#assistant-section" class="btn btn-primary btn-custom-1 py-3 px-5 ml-auto">–°“±—Ä–∞“õ “õ–æ—é</a>
            </div>
          </div>
        </div>
      </div>

      <footer class="site-footer">
        <div class="container">
          <div class="row">
            <div class="col-lg-4">
              <h2 class="footer-heading mb-3">–ë—ñ–∑ —Ç—É—Ä–∞–ª—ã</h2>
                  <p class="mb-5">–ö–æ–º–ø—å—é—Ç–µ—Ä–ª—ñ–∫ “ì—ã–ª—ã–º–¥–∞—Ä–¥—ã “Ø–π—Ä–µ–Ω—É –∫”©“£—ñ–ª–¥—ñ –∂”ô–Ω–µ –±–∞—Ä–ª—ã“ì—ã–Ω–∞ “õ–æ–ª –∂–µ—Ç—ñ–º–¥—ñ –±–æ–ª—É—ã –º“Ø–º–∫—ñ–Ω –¥–µ–ø —Å–µ–Ω–µ—Ç—ñ–Ω –∞–¥–∞–º–¥–∞—Ä</p>

                  <h2 class="footer-heading mb-4">–ñ–∞“£–∞–ª—ã“õ—Ç–∞—Ä</h2>
                  <form action="#" class="d-flex" class="subscribe">
                    <input type="text" class="form-control mr-3" placeholder="Email">
                    <input type="submit" class="btn btn-primary" value="–ñ—ñ–±–µ—Ä—É">
                  </form>
            </div>
            <div class="col-lg-8 ml-auto">
              <div class="row">
                <div class="col-lg-4 ml-auto">
                  <h2 class="footer-heading mb-4">–ù–∞–≤–∏–≥–∞—Ü–∏—è</h2>
                  <ul class="list-unstyled">
                  <li><a href="index_kk.html" class="nav-link">–ë–∞—Å—Ç—ã</a></li>
                  <li class="active"><a href="chat_kk.html" class="nav-link">AI –ö”©–º–µ–∫—à—ñ</a></li>
                  <li><a href="test_kk.html" class="nav-link">–¢–µ—Å—Ç –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã</a></li>
                  <li><a href="img_kk.html" class="nav-link">–ö–æ–Ω—Ç–µ–Ω—Ç –Ü–∑–¥–µ—É</a></li>
                  <li><a href="contact_kk.html" class="nav-link">–ë–∞–π–ª–∞–Ω—ã—Å</a></li>
                  <li><a href="edu_kk.html" class="nav-link">–ë—ñ–ª—ñ–º</a></li>
                  <li><a href="acc_kk.html" class="nav-link">–ê–∫–∫–∞—É–Ω—Ç</a></li>
                  </ul>
                </div>
                <div class="col-lg-4">
                  <h2 class="footer-heading mb-4">AI “ö“±—Ä–∞–ª–¥–∞—Ä—ã</h2>
                  <ul class="list-unstyled">
                    <li><a href="#assistant-section">“ö–∞–∑—ñ—Ä —Å”©–π–ª–µ—Å—ñ“£—ñ–∑</a></li>
                    <li><a href="#features">–§—É–Ω–∫—Ü–∏—è–ª–∞—Ä</a></li>
                    <li><a href="#">–ë–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É“ì–∞ –∫”©–º–µ–∫</a></li>
                    <li><a href="#">–ê–ª–≥–æ—Ä–∏—Ç–º–¥–µ—Ä–≥–µ “õ–æ–ª–¥–∞—É</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="row pt-5 mt-5 text-center">
            <div class="col-md-12">
              <div class="border-top pt-5">
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/jquery-migrate-3.0.0.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.sticky.js"></script>
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.animateNumber.min.js"></script>
    <script src="js/jquery.fancybox.min.js"></script>
    <script src="js/jquery.stellar.min.js"></script>
    <script src="js/jquery.easing.1.3.js"></script>
    <script src="js/bootstrap-datepicker.min.js"></script>
    <script src="js/aos.js"></script>
    <script src="js/responsive.js"></script>

    <script src="js/main.js"></script>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const sendButton = document.getElementById('sendButton');
        const typingIndicator = document.getElementById('typingIndicator');
        const authIndicatorContainer = document.getElementById('authIndicatorContainer');
        
        const SERVER_API_URL = '/api/chat';
        
        let conversationHistory = [
          {
            role: "user",
            parts: [{text: "–°—ñ–∑ –∫–æ–º–ø—å—é—Ç–µ—Ä–ª—ñ–∫ “ì—ã–ª—ã–º–¥–∞—Ä, –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É, –∞–ª–≥–æ—Ä–∏—Ç–º–¥–µ—Ä –∂”ô–Ω–µ –±–∞–π–ª–∞–Ω—ã—Å—Ç—ã –º–µ–∫—Ç–µ–ø –ø”ô–Ω–¥–µ—Ä—ñ –±–æ–π—ã–Ω—à–∞ –º–∞–º–∞–Ω–¥–∞–Ω“ì–∞–Ω AI –æ“õ—É –∫”©–º–µ–∫—à—ñ—Å—ñ—Å—ñ–∑. –°—Ç—É–¥–µ–Ω—Ç—Ç–µ—Ä–≥–µ “Ø–π—Ä–µ–Ω—É–≥–µ –∫”©–º–µ–∫—Ç–µ—Å—É “Ø—à—ñ–Ω –ø–∞–π–¥–∞–ª—ã, –±—ñ–ª—ñ–º –±–µ—Ä—É –∂–∞—É–∞–ø—Ç–∞—Ä—ã–Ω “±—Å—ã–Ω—ã“£—ã–∑. –ñ–∞—É–∞–ø—Ç–∞—Ä–¥—ã “õ—ã—Å“õ–∞ –∂”ô–Ω–µ –æ“õ—É“ì–∞ –±–∞“ì—ã—Ç—Ç–∞–ª“ì–∞–Ω –±–æ–ª—Å—ã–Ω."}]
          },
          {
            role: "model", 
            parts: [{text: "–°”ô–ª–µ–º! –ú–µ–Ω —Å—ñ–∑–¥—ñ“£ AI –æ“õ—É –∫”©–º–µ–∫—à—ñ—Å—ñ–º—ñ–Ω. –ú–µ–Ω —Å—ñ–∑–≥–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–ª—ñ–∫ “ì—ã–ª—ã–º–¥–∞—Ä, –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É, –∞–ª–≥–æ—Ä–∏—Ç–º–¥–µ—Ä –∂”ô–Ω–µ –±–∞—Å“õ–∞ –º–µ–∫—Ç–µ–ø –ø”ô–Ω–¥–µ—Ä—ñ –±–æ–π—ã–Ω—à–∞ –∫”©–º–µ–∫—Ç–µ—Å–µ –∞–ª–∞–º—ã–Ω. –ë“Ø–≥—ñ–Ω –Ω–µ “Ø–π—Ä–µ–Ω–≥—ñ“£—ñ–∑ –∫–µ–ª–µ–¥—ñ?"}]
          }
        ];
        
        // –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è–Ω—ã —Ç–µ–∫—Å–µ—Ä—É
        function checkAuth() {
          const token = localStorage.getItem('token');
          const user = localStorage.getItem('aiToolkitUser');
          return { isAuthenticated: !!(token && user), user: user ? JSON.parse(user) : null };
        }
        
        // –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã–Ω –∫”©—Ä—Å–µ—Ç—É
        function showAuthIndicator() {
          const auth = checkAuth();
          if (auth.isAuthenticated && auth.user) {
            authIndicatorContainer.innerHTML = `
              <div class="auth-indicator">
                üë§ ${auth.user.username} (–î–µ“£–≥–µ–π ${auth.user.level})
                <button onclick="logout()" class="btn btn-sm btn-outline-light ml-2" style="padding: 2px 8px; font-size: 12px;">
                  –®—ã“ì—É
                </button>
              </div>
            `;
          } else {
            authIndicatorContainer.innerHTML = `
              <div class="login-prompt">
                üí° <strong>–ü—Ä–æ–≥—Ä–µ—Å—ñ“£—ñ–∑–¥—ñ –±–∞“õ—ã–ª–∞“ì—ã“£—ã–∑ –∫–µ–ª–µ –º–µ?</strong> 
                <a href="acc_kk.html" class="btn btn-primary btn-sm ml-2">–ö—ñ—Ä—É –Ω–µ–º–µ—Å–µ –¢—ñ—Ä–∫–µ–ª—É</a></p>
              </div>
            `;
          }
        }
        
        // –ñ“Ø–π–µ–¥–µ–Ω —à—ã“ì—É
        window.logout = function() {
          localStorage.removeItem('token');
          localStorage.removeItem('aiToolkitUser');
          showAuthIndicator();
          location.reload();
        };
        
        // –ß–∞—Ç“õ–∞ —Ö–∞–±–∞—Ä–ª–∞–º–∞ “õ–æ—Å—É
        function addMessage(text, isUser) {
          const messageDiv = document.createElement('div');
          messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
          
          const bubbleDiv = document.createElement('div');
          bubbleDiv.className = 'message-bubble';
          
          const messageText = document.createElement('p');
          messageText.textContent = text;
          
          const timeDiv = document.createElement('div');
          timeDiv.className = 'message-time';
          timeDiv.textContent = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
          
          bubbleDiv.appendChild(messageText);
          bubbleDiv.appendChild(timeDiv);
          messageDiv.appendChild(bubbleDiv);
          
          chatMessages.appendChild(messageDiv);
          chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        // AI –∂–∞—É–∞–±—ã–Ω –∞–ª—É
        async function getAIResponse(userMessage) {
          try {
            conversationHistory.push({
              role: "user",
              parts: [{text: userMessage}]
            });
            
            const response = await fetch(SERVER_API_URL, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                messages: conversationHistory
              })
            });
            
            if (!response.ok) {
              throw new Error(`–°–µ—Ä–≤–µ—Ä “õ–∞—Ç–µ—Å—ñ: ${response.status}`);
            }
            
            const data = await response.json();
            
            if (data.choices && data.choices[0] && data.choices[0].message) {
              const aiResponse = data.choices[0].message.content;
              
              conversationHistory.push({
                role: "model",
                parts: [{text: aiResponse}]
              });
              
              return aiResponse;
            } else {
              throw new Error('–°–µ—Ä–≤–µ—Ä–¥–µ–Ω –∫–µ–ª–≥–µ–Ω –∂–∞—É–∞–ø —Ñ–æ—Ä–º–∞—Ç—ã –∂–∞—Ä–∞–º—Å—ã–∑');
            }
          } catch (error) {
            console.error('–°–µ—Ä–≤–µ—Ä API —à–∞–ª—É “õ–∞—Ç–µ—Å—ñ:', error);
            return "–ö–µ—à—ñ—Ä—ñ“£—ñ–∑, “õ–∞–∑—ñ—Ä “õ–æ—Å—ã–ª—ã–º–¥–∞ “õ–∏—ã–Ω–¥—ã“õ—Ç–∞—Ä –±–∞—Ä. –ö–µ–π—ñ–Ω—ñ—Ä–µ–∫ “õ–∞–π—Ç–∞–ª–∞–ø –∫”©—Ä—ñ“£—ñ–∑.";
          }
        }
        
        // –•–∞–±–∞—Ä–ª–∞–º–∞ –∂—ñ–±–µ—Ä—É
        async function sendMessage() {
          const message = chatInput.value.trim();
          
          if (message) {
            addMessage(message, true);
            chatInput.value = '';
            
            sendButton.disabled = true;
            chatInput.disabled = true;
            
            typingIndicator.style.display = 'block';
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            try {
              const response = await getAIResponse(message);
              
              typingIndicator.style.display = 'none';
              addMessage(response, false);
              
              // –ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è–ª–∞–Ω“ì–∞–Ω –±–æ–ª—Å–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–Ω—ã –∂–∞“£–∞—Ä—Ç—É
              const auth = checkAuth();
              if (auth.isAuthenticated) {
                try {
                  const token = localStorage.getItem('token');
                  await fetch('/api/update-progress', {
                    method: 'POST',
                    headers: {
                      'Content-Type': 'application/json',
                      'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({
                      aiRequests: 1
                    })
                  });
                } catch (statsError) {
                  console.log('–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–Ω—ã –∂–∞“£–∞—Ä—Ç—É –º“Ø–º–∫—ñ–Ω –±–æ–ª–º–∞–¥—ã:', statsError);
                }
              }
              
            } catch (error) {
              typingIndicator.style.display = 'none';
              addMessage("–ö–µ—à—ñ—Ä—ñ“£—ñ–∑, —Å—ñ–∑–¥—ñ“£ —Å“±—Ä–∞“ì—ã“£—ã–∑–¥—ã ”©“£–¥–µ—É –∫–µ–∑—ñ–Ω–¥–µ “õ–∞—Ç–µ –∫–µ—Ç—Ç—ñ. “ö–∞–π—Ç–∞–ª–∞–ø –∫”©—Ä—ñ“£—ñ–∑.", false);
            } finally {
              sendButton.disabled = false;
              chatInput.disabled = false;
              chatInput.focus();
            }
          }
        }
        
        // –û“õ–∏“ì–∞ ”©“£–¥–µ—É—ñ—à—Ç–µ—Ä—ñ
        sendButton.addEventListener('click', sendMessage);
        
        chatInput.addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
            sendMessage();
          }
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        showAuthIndicator();
        chatInput.focus();
        
        // –ñ—ã–ª–¥–∞–º —Å“±—Ä–∞“õ—Ç–∞—Ä –º—ã—Å–∞–ª–¥–∞—Ä—ã–Ω “õ–æ—Å—É
        setTimeout(() => {
          const quickQuestions = [
            "–ë–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—É–¥–∞ –∞–π–Ω—ã–º–∞–ª—ã –¥–µ–≥–µ–Ω –Ω–µ?",
            "–¶–∏–∫–ª–¥–∞—Ä “õ–∞–ª–∞–π –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ?",
            "HTML –Ω–µ “Ø—à—ñ–Ω “õ–æ–ª–¥–∞–Ω—ã–ª–∞–¥—ã?",
            "JavaScript-—Ç–µ —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä “õ–∞–ª–∞–π –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ?"
          ];
          
          const examplesContainer = document.createElement('div');
          examplesContainer.style.padding = '1rem';
          examplesContainer.style.textAlign = 'center';
          examplesContainer.innerHTML = `
            <p class="text-muted mb-2">–°“±—Ä–∞“õ “õ–æ–π—ã–ø –∫”©—Ä—ñ“£—ñ–∑:</p>
            <div class="quick-questions">
              ${quickQuestions.map(question => 
                `<button class="btn btn-outline-primary btn-sm m-1" onclick="document.getElementById('chatInput').value='${question}'; document.getElementById('sendButton').click();">${question}</button>`
              ).join('')}
            </div>
          `;
          
          chatMessages.appendChild(examplesContainer);
          chatMessages.scrollTop = chatMessages.scrollHeight;
        }, 2000);
      });
    </script>
  </body>
</html>